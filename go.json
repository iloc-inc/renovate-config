{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",

  "regexManagers": [
    {
      "fileMatch": ["^\\.go-version$"],
      "matchStrings": ["^(?<currentValue>\\d+\\.\\d+(?:\\.\\d+)?)$"],
      "depNameTemplate": "go",
      "versioningTemplate": "semver"
    },
    {
      "fileMatch": ["^go\\.mod$"],
      "matchStrings": [
        "(?m)^go (?<currentValue>\\d+\\.\\d+(?:\\.\\d+)?)$",
        "(?m)^toolchain go(?<currentValue>\\d+\\.\\d+(?:\\.\\d+)?)$"
      ],
      "depNameTemplate": "go",
      "versioningTemplate": "golang"
    },
    {
      "fileMatch": ["^go\\.work$"],
      "matchStrings": ["(?m)^toolchain go(?<currentValue>\\d+\\.\\d+(?:\\.\\d+)?)$"],
      "depNameTemplate": "go",
      "versioningTemplate": "semver"
    },
    {
      "fileMatch": ["^docker-compose\\.ya?ml$"],
      "matchStrings": ["golangci/golangci-lint:v(?<currentValue>\\d+\\.\\d+\\.\\d+)"],
      "depNameTemplate": "golangci/golangci-lint",
      "versioningTemplate": "semver"
    },
    {
      "fileMatch": [".github/workflows/.*\\.ya?ml$"],
      "matchStrings": ["version:\\s*v?(?<currentValue>\\d+\\.\\d+\\.\\d+)"],
      "depNameTemplate": "golangci/golangci-lint",
      "datasourceTemplate": "github-releases",
      "versioningTemplate": "semver"
    }
  ],

  "packageRules": [
    {
      "matchManagers": ["gomod"],
      "groupName": "Go dependencies"
    },
    {
      "matchManagers": ["gomod"],
      "matchUpdateTypes": ["patch"],
      "automerge": true,
      "automergeType": "pr"
    },
    {
      "matchManagers": ["regex"],
      "matchPackageNames": ["golangci/golangci-lint"],
      "groupName": "golangci-lint dependencies"
    },
    {
      "matchManagers": ["regex", "dockerfile"],
      "matchPackageNames": ["go", "golang"],
      "groupName": "Go runtime versions",
      "groupSlug": "go-runtime"
    }
  ]
}
